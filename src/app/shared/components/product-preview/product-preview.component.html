<mat-card class="product-card bg-white">
  <mat-card-header class="product-img" (click)="showDetail(product().id)">
    <app-empty-image></app-empty-image>
    @if (discountPercentage() > 0) {
    <div
      class="product_bubble product_bubble_right product_bubble_red d-flex flex-column align-items-center"
    >
      <span>{{ discountPercentage() | percent : "1.2-2" }}</span>
    </div>
    }
  </mat-card-header>
  <mat-card-content class="mt-2 text-center" (click)="showDetail(product().id)">
    <p class="mb-0 text-truncate">
      <strong>
        {{ product().title }}
      </strong>
    </p>
    <p class="mb-0 text-truncate global-bg-color">
      {{ product().description }}
    </p>
    <div class="mb-0 pt-2 d-flex justify-content-center">
      <app-star-rating
        [showReviewsNumber]="true"
        [reviews]="product().reviews ? product().reviews : []"
      ></app-star-rating>
    </div>
    <div class="mb-0 pt-2">
      <app-product-price-rating
        [product]="product()"
      ></app-product-price-rating>
    </div>
  </mat-card-content>
  @if (showAddToCartButton) {
  <mat-card-actions
    class="justify-content-center add_to_cart_button_actions mt-3 p-0 rounded-bottom"
  >
    @if (quantity() === 0) {
    <button mat-icon-button (click)="addInitialToCart()">
      <mat-icon class="white-icon p-0">add_shopping_cart</mat-icon>
    </button>
    }@else {
    <div class="pe-3">
      <app-quantity-preview-input
        [(quantity)]="quantity"
      ></app-quantity-preview-input>
    </div>
    }
  </mat-card-actions>
  }
</mat-card>
